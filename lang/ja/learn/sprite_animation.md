# 0-0

## アニメーションの読み込み方法

アニメーションは、十分な速度で連続して表示される一連の画像で、運動の様子を表現します。

`loadAni`関数には、シーケンス、リスト、スプライトシートの 3 つのモードがあります。

このミニ例では、クラウドブリージングアニメーションは、最初の画像へのパスとシーケンス内の最後の画像のインデックスが指定された番号付き画像のシーケンスを使用して読み込まれます。

`animation`関数は p5.js の`image`関数に似ています。 p5.js の draw 関数で使用して、位置にアニメーションを表示します。

# 0-1

このミニ例では、`loadAnimation`関数に画像のリストが与えられます。

`ani.frameDelay`プロパティは、アニメーションの画像が次の画像が表示される前に表示されるフレーム数を定義します。 デフォルトは 4 です。 値が大きいほどアニメーションの再生速度が遅くなります。 フレームディレイが 1 の場合、アニメーションは可能な限り早く再生されます。

試してみてください！ このミニ例の frameDelay を変更してみてください。

# 0-2

このミニ例では、スプライトシートからアニメーションを読み込みます。スプライトシートとは、アニメーションのすべてのフレームを含む単一の画像です。このスケッチのスプライトシートを見て、それがどのように見えるかを確認してください。

スプライトシートモードでは、アトラスオブジェクトを使用して各フレームのサイズとアニメーションのフレーム数を指定できます。

プログラムが開始したときにアニメーションを本当に必要とする場合は、setup の代わりに p5.js の preload 関数で読み込む必要があります。

# 1-0

## アニメーション

p5play はアニメーションに対する完全な制御を提供します。

キーボードを使用して、アニメーションを制御するさまざまな方法を試してみてください！

# 2-0

## アニメーション付きスプライト

`sprite.addAni`関数を使用して、スプライトにアニメーションを追加できます。 また、`loadAni`と同様にアニメーションを読み込むこともできます。 最初の入力パラメータとしてオプションで、アニメーションの名前を指定できます。

左マウスボタンを押してみてください。
`sprite.debug`プロパティが true に設定されていると、
スプライトの物理ボディコライダーを見ることができます。

# 2-1

## スプライトのアニメーション制御

`sprite.changeAni` 関数を使用してスプライトのアニメーションを変更します。この関数はアニメーションオブジェクトまたは以前に読み込まれたアニメーションの名前を受け入れます。

`sprite.ani` はスプライトの現在のアニメーションを保持し、`play` や `stop` のようなプロパティや関数にアクセスできるようにします。

`sprite.mirror` ベクトルは、スプライトを水平または垂直に反転させるために使用できます。

左と右を押して、幽霊を動かしてみてください。

アニメーションを停止するには、スペースバーを押してみてください。

# 3-0

## アニメーションを持つグループ

アニメーションがグループに追加されると、新しいグループスプライトはそのアニメーションのコピーを受け取ります。

注意してください。このミニ例では、もしスプラットをあまりにも近くに配置すると、コライダが重ならなくなるまでそれらは離れて移動します。コライダのサイズはアニメーションのサイズから取得されます。

新しいスプラットを追加するには、マウスをクリックしてみてください！

# 4-0

## スプライトシートと複数のアニメーション

同じスプライトシート画像から複数のアニメーションを読み込むには、まずスプライトまたはグループの `spriteSheet` プロパティを設定します。

次に、`addAnimations` / `addAnis` 関数を使用します。これらは、アニメーション名をキー、スプライトシートアトラスを値とするオブジェクトを受け入れます。

アトラスオブジェクトを使用する方が、各フレームの座標を手動で指定するよりも簡単です！

アトラスオブジェクトには、次のプロパティがあります。

`x`、`y`、`pos`、`w`/`width`、`h`/`height`、`size`/`frameSize`、`row`、`col`、`frames`/`frameCount`、`delay`/`frameDelay`、および `rotation`。

「ヒーロー」の例では、ヒーロースプライトのサイズが`Sprite` コンストラクタ内で 32x32 ピクセルに設定されています。そのサイズは与えられた行の値に対する乗数として使用されます。

このリンクをクリックして、例で使用される [questKid](assets/questKid.png) スプライトシート全体を確認してください。

p5play の素晴らしさを本当に評価したい場合は、私の例のコードを[この Phaser デモ](https://labs.phaser.io/view.html?src=src/animation/create%20animation%20from%20sprite%20sheet.js)と比較してみてください。ハ！

アニメーション内の各フレームを同じサイズにし、左から右の順に配置することをおすすめします。そうでない場合は、アトラスオブジェクトの代わりに座標の配列を使用して各フレームの位置を手動で指定する必要があります。

# 4-1

## アニメーション

すべてのスプライトとグループには、アニメーションを保存する `animations` / `anis` オブジェクトがあります。キーはアニメーション名で、値はアニメーションオブジェクトです。これはグループと同様に機能し、ソフトで動的な継承を利用しています。

`ani.offset` プロパティは、アニメーションの位置をスプライトの位置に対して調整するために使用されます。

`sprite.pixelPerfect` が true に設定されている場合、スプライトは整数座標で描画され、そのコライダの正確な位置が保持されます。これはピクセルアートのゲームに役立ちます！

# 5-0

## アニメーションのシーケンス

`sprite.changeAni` は、アニメーションオブジェクト、アニメーション名、またはシーケンスで再生されるアニメーション名の配列を受け入れることができます。

デフォルトでは、ループが有効になっている場合、シーケンスの最後のアニメーションがループされます。シーケンス全体をループさせるには、最後のアニメーション名として `'**'` を使用します。逆に、シーケンスを最後で停止させたい場合は、最後のアニメーション名として `';;'` を使用します。

この例では、ヒーローキャラクターを WASD キーまたは矢印キーを使用して画面内で移動させる方法を示しています！

# 6-0

## 高度なアニメーションのシーケンシング

`sprite.changeAni` は非同期関数です。これを使用してアニメーションが再生を終了するのを待つことができます。

例は近日公開予定です！
