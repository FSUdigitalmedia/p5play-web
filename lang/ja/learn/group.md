# 0-0

## グループとは何ですか？

p5play では、グループは、同様の特性と振る舞いを持つスプライトのコレクションであり、設計図でもあります。例えば、Pac-Man のドット！

`group.length`プロパティは、グループにいくつのスプライトがあるかを確認するために使用できます。この例では、ドットのグループが 24 個未満のスプライトを持つ限り、while ループの条件が真です。

このミニ例では、`new dots.Sprite`は、ドットのグループの色、y 位置、直径を継承するスプライトを作成します。各ドットには一意の x 位置が割り当てられます。

私はこれを「ソフト継承」と呼びます。なぜなら、グループは新しいグループスプライトの設計図として機能するからです。

# 0-1

グループは配列なので、インデックスでグループ内のスプライトにアクセスできます。グループには、標準の JavaScript の配列メソッドを使用することができます。

# 0-2

グループのプロパティを異なる値に設定すると、グループ内のすべてのスプライトに影響を及ぼします！私はこれを「動的継承」と呼んでいます。

# 0-3

`group.moveTowards`のような移動関数を使用すると、グループ内のすべてのスプライトが移動します。

# 1-0

## アロー関数プロパティセッター

p5play では、グループ内のスプライトプロパティをアロー関数に設定すると、そのグループを使用して作成された新しいスプライトは、その関数を使用してプロパティを評価します。

`group.amount`が調整されると、グループは自動的に設定した量に合わせてスプライトを作成したり削除したりします。

このミニ例では、各宝石のスプライトにはランダムな x 座標と y 座標が割り当てられます。

# 2-0

## 衝突と重なり

衝突と重なりの関数は、2つのスプライト間のイベントを検出するためだけでなく、スプライトとグループ、またはグループ間の衝突と重なりをチェックするためにも使用できます。使用できる関数は次のとおりです：

`collides`, `colliding`, `collided`  
`overlaps`, `overlapping`, `overlapped`

これらの関数を `if` 文で使用する代わりに、コールバック関数を2番目のパラメータとして提供することもできます。衝突または重なりのイベントが発生したときにコールバック関数が実行されます。コールバック関数は、2つのスプライトを入力として受け取ります。

このミニ例では、コールバック関数はプレイヤースプライトとプレイヤーが重なっているgemsグループ内のジェムスプライトを受け取ります。そのジェムは収集され（削除され）ます。

# 3-0

## allSprites グループ

p5play は、スケッチ内のすべてのスプライトを含む`allSprites`グループを作成します。

# 4-0

## インデックス付きアロー関数セッター

グループスプライトのプロパティを評価するときは、そのインデックスを使用することさえできます！

`i`はグループ内のスプライトのインデックスで、それらが評価されるときにグループプロパティ関数への入力パラメータとして与えられます。

# 5-0

## サブグループ

このミニ例では、`boxes`グループの 2 つのサブグループ、`smallBoxes`と`bigBoxes`があります。

`bigBoxes`グループを使用して作成された新しいスプライトは、`boxes`グループから特性を継承しますが、`smallBoxes`グループからは継承しません。

`boxes`グループには、`smallBoxes`グループと`bigBoxes`グループのすべてのスプライトが含まれています。

`group.removeAll`関数を使用して、グループからすべてのスプライトを削除することができます。

# 6-0

## カリング

デフォルトでは、スプライトはカメラの位置に対して 10000 ピクセル画面外に行くと削除されます。これは、世界が大きくなりすぎて物理シミュレーションが遅くなるのを防ぐためです。

これを変更するには、`allSprites.autoCull = false`を設定し、`group.cull`関数を使用して異なるカリング境界を設定します。物理コライダーを持たないスプライトさえカリングすることができます。

オプションの最後のパラメータは、スプライトがカリングされたときに呼び出されるコールバック関数を指定するために使用できます。カリングへのデフォルトの応答は、カリング境界を超えたスプライトを削除することですが、自分の関数を設定することで、他のことを行うことができます。コールバック関数は、カリングされたスプライトとそのフレームでカリングされたスプライトの合計数を受け取ります。この例では、1 フレームで 1 つ以上のボールがカリングされた場合、ボールの数が減ります。

# 6-1

## life

スプライトが存在する期間を制限する別の方法は、その`life`プロパティを設定することです。これはスプライトが存在するフレーム数です。スプライトの寿命が尽きると、それは削除されます。これは、発射体やフォースフィールドなどの一時的なオブジェクトを作成するのに便利です。

この小さなゲームを試してみてください！マウスをクリックしてビーチボールを作成し、水流で空中に保つようにしてみてください。

# 7-0

## カスタムプロパティ

スプライトとグループに独自のプロパティを追加できます。これは他の JavaScript オブジェクトと同じです！

また、グループにカスタムプロパティを追加すると、それらは新しいグループスプライトによって継承されます。プロパティセッターとしてアロー関数を使用することさえできます。
