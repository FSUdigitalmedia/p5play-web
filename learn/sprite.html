<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>p5.play : Sprite</title>
	<link rel="icon" href="../logo.svg" />
	<link rel="stylesheet" href="p5-mini.css" />
	<link rel="stylesheet" href="style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.js"></script>
	<script src="../v3/planck.js"></script>
	<script src="../v3/p5.play.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.8.1/ace.min.js"></script>
</head>

<body>
	<nav id="topNav">
		<a href="../index.html" class="active"><img src="../logo.svg" class="logo">p5.play</a>
		<span>:</span>
		<a href="sprite.html" class="active">Sprite</a>
		<a href="group.html">Group</a>
		<a href="sprite_animation.html">SpriteAnimation</a>
		<a href="tiles.html">Tiles</a>
		<a href="camera.html">Camera</a>
	</nav>
	<div class="top break"></div>
	<div id="page-0" class="page">
		<div>
			<h2>What is a sprite?</h2>
			<p>A sprite is a ghost!</p>
			<p>Video game developers use the word "sprite" to refer to characters, items,
				or anything else that moves above a background.</p>
			<p>Try editing the properties of the square and circle sprites in the mini
				p5.js sketches below and press play!
			</p>
		</div>
		<div class="minis horiz">
			<div>
				<script type="text/p5" name="square" base-0 horiz lines="9">
let sprite;

function setup() {
	createCanvas(200, 100);

	sprite = new Sprite();
	sprite.width = 50;
	sprite.height = 50;
}

function draw() {
	clear();
}
	</script>
			</div>
			<div>
				<script type="text/p5" name="circle" base-1 horiz lines="8">
let sprite;

function setup() {
	createCanvas(200, 100);

	sprite = new Sprite();
	sprite.diameter = 50;
}

function draw() {
	clear();
}
				</script>
			</div>
		</div>
		<div class="minis">
			<div>
				<script type="text/p5" name="x">
				sprite.x = 150;
			</script>
			</div>
			<div>
				<script type="text/p5" name="y" base="1">
				sprite.y = 30;
			</script>
			</div>
			<div>
				<script type="text/p5" name="velocity.x" base="1">
				sprite.vel.x = cos(frame);
			</script>
			</div>
			<div>
				<script type="text/p5" name="velocity.y">
				sprite.vel.y = cos(frame);
			</script>
			</div>
			<div>
				<script type="text/p5" name="rotationSpeed">
							sprite.rotationSpeed = 1;
						</script>
			</div>
			<div>
				<script type="text/p5" name="shapeColor" base="1">
let c = color(0, 255, 0);
sprite.shapeColor = c;
						</script>
			</div>
		</div>

		<div class="minis">
			<div>
				<script type="text/p5" name="width">
								sprite.w = 200;
							</script>
			</div>
			<div>
				<script type="text/p5" name="height">
								sprite.h = 80;
							</script>
			</div>
			<div>
				<script type="text/p5" name="diameter" base="1">
				sprite.d = 75;
			</script>
			</div>
			<div>
				<script type="text/p5" name="rotation">
				sprite.rotation = 45;
			</script>
			</div>
			<div>
				<script type="text/p5" name="speed">
sprite.direction = 45;
sprite.speed = cos(frame);
			</script>
			</div>
			<div>
				<script type="text/p5" name="visible">
				sprite.visible = false;
			</script>
			</div>
		</div>
		<div class="break"></div>
		<div>
			<h2>Try it out!</h2>
			<p>
				Try creating your own sprite. Have it be a circle with a diameter of 40. Position it so it touches the top right
				corner of the canvas. Change it's velocity to have it move left and down.
			</p>
		</div>
		<script type="text/p5" name="Level 1 Challenge" horiz>
let sprite;

function setup() {
	createCanvas(200, 100);

}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-1" class="page">
		<div>
			<h2>Sprite physics</h2>
			<p>A sprite's collider is used to detect collisions with other sprites.</p>
			<p>By default, sprites have a dynamic physics collider that allows the sprite to move freely and be affected by
				gravity.</p>
			<p>There's another collider type called 'static'. Sprites that have a static collider can't be moved by other
				sprites and aren't affected by gravity.</p>
			<p>You might have to replay these mini-sketches to see what happened!</p>
		</div>
		<div>
			<script type="text/p5" name="dynamic and static colliders" base-2 horiz lines="16">
let ball, floor;

function setup() {
	createCanvas(200, 200);
	world.gravity.y = 10;

	ball = new Sprite();
	ball.diameter = 50;
	ball.y = 30;

	floor = new Sprite();
	floor.collider = 'static';
	floor.y = 190;
	floor.w = 400;
	floor.h = 5;
}

function draw() {
	clear();
}
					</script>
		</div>
		<div class="minis">
			<div>
				<script type="text/p5" name="bounciness" base="2">
// scale of 0 to 1
ball.bounciness = 1;
						</script>
			</div>
			<div>
				<script type="text/p5" name="sloped floor" base="2">
floor.rotation = 2;
						</script>
			</div>
		</div>

		<div class="minis">
			<div>
				<script type="text/p5" name="anti-gravity" base="2">
world.gravity.y = -1;
						</script>
			</div>
			<div>
				<script type="text/p5" name="whoops!" base="2">
ball.collider = 'static';
floor.collider = 'dynamic';
						</script>
			</div>
		</div>
		<div class="break"></div>
		<div>
			<h2>Try it out!</h2>
			<p>
				Try creating a static sprite <code>peg</code> with a circle collider shape. Drop a dynamic sprite
				<code>block</code> with a box collider shape on
				top of it. Make the block fall to the right of the peg.
			</p>
		</div>
		<script type="text/p5" name="Level 1 Challenge" horiz>
let peg, block;

function setup() {
	createCanvas(200, 100);

}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-2" class="page">
		<div>
			<h2>Sprite movement</h2>
			<p>There are a few ways to move a sprite. Note that directly changing a sprite's position teleports it.
			</p>
			<p>If you want a sprite to interact with other sprites while it's moving, change
				the sprite's x/y velocity, speed/direction, or use the move or moveTowards methods.</p>
			<p>Remember the p5.js setup function only runs once at the beginning of your sketch so move sprites in draw!
			</p>
			<p>Use your mouse to interact with these mini-sketches!</p>
		</div>
		<script type="text/p5" name="idle player" lines="11" base-3>
let player, block;

function setup() {
	createCanvas(500, 100);

	player = new Sprite();
	player.diameter = 50;
	player.x = 400;

	block = new Sprite();
}

function draw() {
	clear();
}
		</script>
		<script type="text/p5" name="teleport" base="3">
if (mouse.pressed()) {
	player.x = mouse.x;
	player.y = mouse.y;
}
		</script>
		<script type="text/p5" name="velocity" base="3">
if (kb.pressing('a')) player.vel.x = -5;
else if (kb.pressing('d')) player.vel.x = 5;
else player.vel.x = 0;
		</script>
		<script type="text/p5" name="moveTowards" base="3">
player.moveTowards(mouse.x, mouse.y);
				</script>
		<script type="text/p5" name="move" base="3">
if (mouse.held()) {
	player.move(mouse.x, mouse.y, 8);
}
		</script>
	</div>
	<div id="page-3" class="page">
		<div>
			<h2>Create Sprites faster</h2>
			<p>Inside the Sprite constructor, <code>new Sprite()</code>, you can specify the sprite's position, size, and
				collider
				type.</p>
			<p>As you saw on the first Sprite reference page, adding these inputs to the constructor is optional. But, if you
				do want to set a sprite's size in the constructor you'll need to specify its position first.</p>
			<p>
				By default, if no inputs are given to the Sprite constructor, new sprites are positioned at the center of the
				canvas, with a width and height of 50 pixels, and a dynamic collider.
			</p>
			<script type="text/p5" name="default sprite" lines="3" horiz>
function setup() {
	new Sprite();
}

function draw() {
	clear();
}
					</script>
		</div>
		<div class="minis horiz">
			<script type="text/p5" name="Ooo!" horiz lines="18">
let box, circle;

function setup() {
	createCanvas(50, 200);
	world.gravity.y = 10;

	//             	( x,  y,  w,  h, collider)
	box = new Sprite(25, 70, 10, 90, 'static');
	// same as setting the values separately
	// box.x = 25;
	// box.y = 60;
	// box.width = 10;
	// box.height = 90;
	// box.collider = 'static';

	// 					 	     ( x,   y,  d, collider)
	circle = new Sprite(25, 140, 10, 'static');
}

function draw() {
	clear();
}
			</script>
			<script type="text/p5" name="ball on the floor" lines="10" horiz>
let ball, floor;

function setup() {
	createCanvas(80, 160);
	world.gravity.y = 10;
	
	ball = new Sprite(40, 30, 50);

	floor = new Sprite(40, 155, 80, 5, 'static');
}

function draw() {
	clear();
}
			</script>
		</div>
		<div class="break"></div>
		<div>
			<h2>Try it out!</h2>
			<p>
				Try creating two sprites using the sprite constructor.
			</p>
		</div>
		<script type="text/p5" name="Level 1 Challenge" horiz>
let sprite1, sprite2;

function setup() {
	createCanvas(200, 100);

}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-4" class="page">
		<div>
			<h2>spriteArt</h2>
			<p>
				You can use the <code>spriteArt</code> function to create pixel art images for your sprites. It takes a string
				as input and returns an image. Each character in the string represents the color value of a pixel in the image.
			</p>
			<p>
				The second input parameter to the <code>spriteArt</code> function is the scale of the image.
			</p>
		</div>
		<script type="text/p5" name="smiley">
let smiley;

function setup() {
	createCanvas(500, 120);
	let str = `
..yyyyyy
.yybyybyy
yyyyyyyyyy
yybyyyybyy
.yybbbbyy
..yyyyyy`;

	let img = spriteArt(str, 16);
	smiley = new Sprite(img);
}

function draw() {
	clear();
}
		</script>
		<div>
			<p>
				The default palette uses p5.js default colors but you can change the color palette too!
			</p>
		</div>
		<script type="text/p5" name="smiley">
let smiley;

function setup() {
	createCanvas(500, 120);
	let str = `
..yyyyyy
.yybyybyy
yyyyyyyyyy
yybyyyybyy
.yybbbbyy
..yyyyyy`;

	let palette = {
		'y': color(255, 220, 60),
		'b': color(20)
	};

	let img = spriteArt(str, 16, palette);
	smiley = new Sprite(img);
}

function draw() {
	clear();
}
				</script>
	</div>
	<div id="page-5" class="page">
		<div>
			<h2>Sprite overlap</h2>
			<p>Sprites collide by default but they can also overlap!</p>
		</div>
		<script type="text/p5" name="overlap" horiz lines="8">
function setup() {
	createCanvas(200, 128);

	sprite1 = new Sprite(90, 50);
	sprite2 = new Sprite(115, 75);

	sprite1.overlap(sprite2);
}

function draw() {
	clear();
}
		</script>
		<script type="text/p5" name="pillar stomp!" horiz>
let player, pillar;

function setup() {
	createCanvas(60, 480);
	world.gravity.y = 10;

	pillar = new Sprite(30, 480, 30, 720, 'static');

	player = new Sprite(30, 0, 50);

	player.collide(pillar, stomp);
}

function stomp() {
	if (player.vel.y < -0.9) {
		pillar.h -= 52;
	}
}

function draw() {
	clear();
	if (mouse.pressed()) {
		player.vel.y = -5;
	}
}
		</script>
		<script type="text/p5" name="overlap collect">
let player, coin;

function setup() {
	createCanvas(500, 100);

	coin = new Sprite(400, 50, 30);
	coin.shapeColor = 'yellow';

	player = new Sprite(50, 50);
	
	player.overlap(coin, () => coin.remove());
}

function draw() {
	clear();
	if (mouse.isOnCanvas) {
		player.moveTowards(mouse.x, mouse.y);
	}
}
		</script>
		<div class="break"></div>
		<div>
			<h2>Try it out!</h2>
			<p>
				Try making a sprite that changes color when it overlaps with another sprite.
			</p>
		</div>
		<script type="text/p5" name="Level 1 Challenge" horiz>
let sprite1, sprite2;

function setup() {
	createCanvas(200, 100);
	
}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-6" class="page">
		<div>
			<h2>Chain Colliders</h2>
			<!-- <p style="font-style: italic;">Level 2 reference</p> -->
			<p>
				In addition to rectangle and circle colliders you can also make chains of lines.
			</p>
			<p>
				In this example, the chain is made with a list of line lengths and angles.
			</p>
		</div>
		<script type="text/p5" name="line lengths and angles list" lines="9">
function setup() {
	createCanvas(500, 200);
	world.gravity.y = 10;

	//        (  x,   y, [length, angle, ...])
	new Sprite(250, 100, [300, 10, 200, 20], 'static');

	new Sprite(40, 0, 20); // ball
}
	
function draw() {
	clear();
}
		</script>
		<div>
			<p>
				You can also make chains using a list of points (vertices).
			</p>
			<p>
				By default a chain's x and y position is
				located at the center of the chain, just like with other collider shapes. Although, when making a chain using
				vertices you may find it useful to have the chain start at the chain's (x,y) position. You can do this by
				changing the <code>p5play.chainOrigin</code> property from the default "center" to "start". The chain's vertices
				are "relative" to the chain's origin but you can also change the <code>p5play.chainPoints</code> property to
				"absolute".
			</p>
			<p>
				Try changing this chain's position so the ball can roll on it!
			</p>
		</div>
		<script type="text/p5" name="vertex list" lines="11">
			function setup() {
	createCanvas(500, 200);
	world.gravity.y = 10;

	p5play.chainOrigin = 'start';

	//        (  x,   y, [point0, point1, ...])
	new Sprite(250, 100, [[200, 20], [400, 100]], 'static');

	new Sprite(40, 0, 20); // ball
}
	
function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-7" class="page">
		<div>
			<h2>Polygon Colliders</h2>
			<p>
				If the start and end of a chain is at the same point it automatically becomes a polygon collider!
			</p>
			<p>
				The easiest way to make regular polygons like a Hexagon is with a list of line lengths and angles with a repeat.
			</p>
		</div>
		<script type="text/p5" name="hexagon" lines="6">
function setup() {
	createCanvas(500, 200);

	//        ( x,  y, [length, angle, repeat])
	new Sprite(250, 100, [80, 360 / 6, 6]);
}
	
function draw() {
	clear();
}
		</script>
		<div class="break"></div>
		<div>
			<h2>Try it out!</h2>
			<p>
				Try making a triangle collider.
			</p>
		</div>
		<script type="text/p5" name="Level 2 Challenge">
let triangle;

function setup() {
	createCanvas(200, 100);
	
}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-8" class="page">
		<div>
			<h2>Custom draw</h2>
			<!-- <p style="font-style: italic;">Level 2 reference</p> -->
			<p>
				Sometimes you won't be able to use pre-drawn animations to get
				the kind of visual effect you want for a sprite in motion.
			</p>
			<p>
				Fortunately, you can customize the sprite's <code>draw</code> function
				and make it display anything you want!
			</p>
			<p>
				Note that inside the sprite's draw function the center of the sprite
				is translated to position (0, 0).
			</p>
			<p>
				This mini example rotates the sprite's ellipse to the direction it's moving and makes the ellipse stretch in
				that direction
				proportional to it's speed. Kind of complicated!
			</p>
		</div>
		<script type="text/p5" name="custom draw">
let face, stretchy;

function setup() {
	createCanvas(500, 200);
	noStroke();

	face = loadImage('assets/face.png');
	stretchy = new Sprite(400, 200, 10, 10);
	
	stretchy.draw = () => {
		fill(237, 205, 0);

		push();
		rotate(stretchy.direction);
		ellipse(0, 0, 100 + stretchy.speed, 100 - stretchy.speed);
		pop();

		image(face, stretchy.vel.x * 2, stretchy.vel.y * 2);
	};
}

function draw() {
	clear();
	stretchy.moveTowards(mouse.x, mouse.y, 0.07);
}
//
				</script>
	</div>

	<div class="break"></div>
	<nav id="pageNav"></nav>
	<div class="break"></div>
	<footer class="text-small">
		Created by Quinton Ashley (@quinton-ashley) Copyright 2022.
	</footer>

	<script src="learn.js"></script>
	<script src="p5-mini.js"></script>
</body>

</html>
