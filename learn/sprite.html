<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>p5.play : Sprite</title>
	<link rel="icon" href="../logo.svg" />
	<link rel="stylesheet" href="p5-mini.css" />
	<link rel="stylesheet" href="style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
	<script src="../v3/planck.min.js"></script>
	<script src="../v3/p5.play.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.8.1/ace.min.js"></script>

</head>

<body>
	<nav id="topNav">
		<a href="../index.html" class="active"><img src="../logo.svg" class="logo">p5.play</a>
		<span>:</span>
		<a href="sprite.html" class="active">Sprite</a>
		<a href="group.html">Group</a>
		<a href="sprite_animation.html">Animation</a>
		<a href="input_devices.html">Input</a>
		<a href="tiles.html">Tiles</a>
		<a href="camera.html">Camera</a>
		<a href="advanced.html">Adv</a>
		<span class="colon">:</span>
		<a id="darkMode" onclick="toggleDarkMode()">
			<div id="darkModeIcon"></div>
		</a>
	</nav>
	<div class="top break"></div>
	<div id="page-0" class="page">
		<div>
			<h2>What is a sprite?</h2>
			<p>A sprite is a ghost!</p>
			<p>Video game developers use the word "sprite" to refer to characters, items,
				or anything else that moves above a background.</p>
			<p>Try editing the properties of the square and circle sprites in the mini
				p5.js sketches below and press play!
			</p>
		</div>
		<div class="minis horiz">
			<script type="text/p5" name="square" base-0 horiz lines="9">
let sprite;

function setup() {
	new Canvas(200, 100);

	sprite = new Sprite();
	sprite.width = 50;
	sprite.height = 50;
}

function draw() {
	clear();
}
	</script>
			<script type="text/p5" name="circle" base-1 horiz lines="8">
let sprite;

function setup() {
	new Canvas(200, 100);

	sprite = new Sprite();
	sprite.diameter = 50;
}

function draw() {
	clear();
}
				</script>
		</div>
		<div class="minis">
			<script type="text/p5" name="x">
				sprite.x = 150;
			</script>
			<script type="text/p5" name="y" base="1">
				sprite.y = 30;
			</script>
			<script type="text/p5" name="rotation">
				sprite.rotation = 45;
			</script>
			<script type="text/p5" name="rotationSpeed">
				sprite.rotationSpeed = 1;
			</script>
			<script type="text/p5" name="color" base="1">
let c = color(0, 255, 0);
sprite.color = c;
			</script>
			<script type="text/p5" name="textColor">
sprite.textColor = 'blue';
sprite.text = "Hello!";
			</script>
		</div>

		<div class="minis">
			<script type="text/p5" name="width">
				sprite.w = 200;
			</script>
			<script type="text/p5" name="height">
				sprite.h = 80;
			</script>
			<script type="text/p5" name="diameter" base="1">
				sprite.d = 40;
			</script>
			<script type="text/p5" name="radius">
				sprite.r = 40;
			</script>
			<script type="text/p5" name="textSize">
sprite.textSize = 40;
sprite.text = "p5";
			</script>
			<script type="text/p5" name="visible">
				sprite.visible = false;
			</script>
		</div>
		<div class="break"></div>
		<script type="text/md">
## Try it out!

The code in the `setup` function is run by p5.js when the program starts. The p5.js `draw` function is run 60 times per second. `new Canvas()` is equivalent to the p5.js `createCanvas` function which is used to create a section of the screen the program can draw on.

Try making the `ball` sprite a blue circle with a diameter of 30 and place it at the top right corner of the canvas.
		</script>
		<script type="text/p5" name="Level 0 Challenge" lines="13" horiz>
let ball;

function setup() {
	new Canvas(200, 256);
	ball = new Sprite();
	// write your code here!
  
}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-1" class="page">
		<script type="text/md">
## Sprite physics

A sprite's collider is used to detect collisions with other
sprites. By default, sprites have a `'dynamic'` physics
collider that allows the sprite to move freely and be affected by
gravity.

`'static'` colliders can't be moved. `'kinematic'` colliders can be moved 
programmatically but not by other sprites. Setting a sprite's collider
type to `'none'` fully removes it from the physics simulation.

You can also use the letters `'d'`, `'s'`, `'k'`, and `'n'` to
set the collider type of a sprite without having to type out
the full type name.

You might have to replay these mini-sketches to see what happened!
			</script>
		<div>
			<script type="text/p5" name="dynamic and static colliders" base-2 horiz lines="16">
let ball, floor;

function setup() {
	new Canvas(242, 200);
	world.gravity.y = 10;

	ball = new Sprite();
	ball.diameter = 50;
	ball.y = 30;

	floor = new Sprite();
	floor.collider = 'static';
	floor.y = 190;
	floor.w = 400;
	floor.h = 5;
}

function draw() {
	clear();
}
			</script>
		</div>
		<div class="minis">
			<script type="text/p5" name="anti-gravity" base="2">
world.gravity.y = -1;
			</script>
			<script type="text/p5" name="sloped floor" base="2">
floor.rotation = 2;
			</script>
		</div>

		<div class="minis">
			<script type="text/p5" name="rising platform" base="2">
floor.collider = 'k';
floor.vel.y = -1;
			</script>
			<script type="text/p5" name="whoops!" base="2">
floor.collider = 'none';
			</script>
		</div>
		<div class="break"></div>
		<script type="text/md">
## Try it out!

Try creating a sprite `peg` with a static collider and circle shape. Create a sprite `block` with a dynamic collider and box shape. Make the block fall from above and hit the peg, falling to the right side.

Note that `world` is created when p5.play loads, but by default the (x, y) gravity is (0, 0).
		</script>
		<script type="text/p5" name="Level 1 Challenge" lines="13" horiz>
let peg, block;

function setup() {
	new Canvas(200, 256);

}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-2" class="page">
		<div>
			<h2>Sprite movement</h2>
			<p>
				Note that directly changing a sprite's position teleports it! Try clicking around this mini-example.
			</p>
			<p>
				Don't teleport a sprite if you want it to physically interact with other sprites while it's moving.
			</p>
		</div>
		<script type="text/p5" name="idle player" lines="11" hide base-3>
let player, block;

function setup() {
	new Canvas(500, 100);

	player = new Sprite();
	player.diameter = 50;
	player.x = 400;

	block = new Sprite();
}

function draw() {
	clear();
}
		</script>
		<script type="text/p5" name="teleport" base="3">
if (mouse.presses()) {
	player.x = mouse.x;
	player.y = mouse.y;
}
		</script>
		<div>
			<p>
				The <code>moveTo</code> function moves a sprite to a position, at a constant speed.
			</p>
			<p>
				The function can accept an
				(x, y) position or object with (x, y) position properties. Speed can also be set
				separately with the <code>sprite.speed</code> property.
			</p>
			<p>
				Note that if the sprite encounters
				resistance, its speed and direction will be affected and it may not reach the target position.
			</p>
		</div>
		<script type="text/p5" name="moveTo" base="3">
if (mouse.presses()) {
	//        (position, speed)
	player.moveTo(mouse, 8);
}
		</script>
		<div>
			<p>
				Move the sprite indefinitely by setting it's direction and speed.
			</p>
			<p>
				You can set a sprite's direction using an angle value or direction name: 'up', 'down', 'left', 'right',
				'upLeft',
				'upRight', 'downLeft', 'downRight'.
			</p>
		</div>
		<script type="text/p5" name="direction + speed" base="3">
player.direction = 190;
player.speed = 2;
		</script>
		<div>
			<p>
				The <code>move</code> function moves a sprite in a direction, at a fixed speed, across a distance.
			</p>
			<p>
				Direction and speed can be set
				separately.
			</p>
		</div>
		<script type="text/p5" name="move" base="3">
if (kb.presses('ArrowLeft')) {
	//    (direction, speed, distance)
	player.move('left', 3, 50);
}
		</script>
		<div>
			<p>
				You can also change the sprite's (x, y) velocities directly.
			</p>
		</div>
		<script type="text/p5" name="velocity" base="3">
if (kb.pressing('ArrowLeft')) player.vel.x = -3;
else player.vel.x = 0;
		</script>
		<div>
			<p>
				The <code>moveTowards</code> function moves a sprite towards a position, at a percentage of the distance to that
				position.
			</p>
			<p>
				In this example the player moves towards the mouse by 10% of the distance to
				the mouse on every p5.js draw call.
			</p>
		</div>
		<script type="text/p5" name="moveTowards" base="3">
player.moveTowards(mouse, 0.10);
		</script>
	</div>
	<div id="page-3" class="page">
		<script type="text/md">
## Make Pixel Art!
			
You can use the `spriteArt` function to create pixel art images for your sprites. It takes a string as input and returns an image. Each character in the string represents the color value of a pixel in the image.

The second input parameter to the `spriteArt` function is the scale of the image.
			</script>
		<script type="text/p5" name="smiley">
let smiley;

function setup() {
	new Canvas(500, 120);
	let str = `
..yyyyyy
.yybyybyy
yyyyyyyyyy
yybyyyybyy
.yybbbbyy
..yyyyyy`;

	smiley = new Sprite();
	smiley.img = spriteArt(str, 16);
}

function draw() {
	clear();
}
			</script>
		<div>
			<p>
				The default palette uses p5.js default colors but you can change the color palette too!
			</p>
		</div>
		<script type="text/p5" name="smiley">
let smiley;

function setup() {
	new Canvas(500, 120);
	let str = `
..yyyyyy
.yybyybyy
yyyyyyyyyy
yybyyyybyy
.yybbbbyy
..yyyyyy`;

	let palette = {
		'y': color(255, 220, 60),
		'b': color(20)
	};

	smiley = new Sprite();
	smiley.img = spriteArt(str, 16, palette);
}

function draw() {
	clear();
}
					</script>
	</div>
	<div id="page-4" class="page">
		<div>
			<script type="text/md">
## Create Sprites faster

Inside the Sprite constructor, `new Sprite()`, you can specify the sprite's position, size, and collider type.

As you saw on the previous Sprite reference pages, you don't need to add any inputs to the Sprite constructor to create a sprite. But, if you do want to set a sprite's size in the constructor you'll need to specify its position first.

By default, if no inputs are given to the Sprite constructor, new sprites are positioned at the center of the canvas, with a width and height of 50 pixels, and a dynamic collider.
			</script>
			<script type="text/p5" name="default sprite" lines="3" horiz>
function setup() {
	new Sprite();
}

function draw() {
	clear();
}
			</script>
		</div>
		<div class="minis horiz">
			<script type="text/p5" name="Ooo!" horiz lines="18">
let box, circle;

function setup() {
	new Canvas(50, 200);
	world.gravity.y = 10;

	//             	( x,  y,  w,  h, collider)
	box = new Sprite(25, 70, 10, 90, 'static');
	// same as setting the values separately
	// box.x = 25;
	// box.y = 70;
	// box.width = 10;
	// box.height = 90;
	// box.collider = 'static';

	// 					 	     ( x,   y,  d, collider)
	circle = new Sprite(25, 140, 10, 'static');
}

function draw() {
	clear();
}
			</script>
			<script type="text/p5" name="ball on the floor" lines="10" horiz>
let ball, floor;

function setup() {
	new Canvas(80, 160);
	world.gravity.y = 10;
	
	ball = new Sprite(40, 30, 50);

	floor = new Sprite(40, 155, 80, 5, 'static');
}

function draw() {
	clear();
}
			</script>
		</div>
		<div class="break"></div>
		<div>
			<h2>Try it out!</h2>
			<p>
				Try creating two sprites using the sprite constructor.
			</p>
		</div>
		<script type="text/p5" name="Level 1 Challenge" lines="13" horiz>
let sprite1, sprite2;

function setup() {
	new Canvas(50, 256);

}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-5" class="page">
		<script type="text/md">
## collides, colliding, and collided

On the first frame that a sprite collides with another sprite, the `collides` function returns true.

While a sprite is colliding with another sprite, the `colliding` function returns the number of frames the collision has occurred for.

On the first frame after two sprites collided, the `collided` function returns true.
		</script>
		<script type="text/p5" name="pillar stomp!" horiz>
let player, pillar;

function setup() {
	new Canvas(60, 342);
	world.gravity.y = 10;
	
	pillar = new Sprite(30, 362, 30, 500, 'static');
	player = new Sprite(30, 0, 50);
}

function draw() {
	clear();

	if (player.collides(pillar)) {
		player.vel.y = -5;
		pillar.h -= 52;
	}
}
		</script>
		<script type="text/p5" name="drop block" horiz>
let block, floor;

function setup() {
	new Canvas(60, 342);
	world.gravity.y = 10;
	
	block = new Sprite(30, 30);
	floor = new Sprite(30, 300, 60, 5, 'static');
	floor.color = 'red';
}

function draw() {
	clear();
	if (block.colliding(floor)) {
		block.color = 'red';
	} else block.color = 'blue';

	if (block.colliding(floor) > 60) {
		block.vel.y = -9;
	}
}
		</script>
		<script type="text/p5" name="break floor" horiz>
let block, floor;

function setup() {
	new Canvas(60, 342);
	world.gravity.y = 10;
	
	block = new Sprite(30, 30);
	floor = new Sprite(30, 300, 60, 5, 'static');
}

function draw() {
	clear();
	if (block.collided(floor)) {
		floor.collider = 'dynamic';
	}
}
		</script>
	</div>
	<div id="page-6" class="page">
		<div>
			<h2>Overlap</h2>
			<p>Sprites collide by default but they can also overlap!</p>
		</div>
		<script type="text/p5" name="overlap" horiz lines="8" base-4>
function setup() {
	new Canvas(200, 128);

	sprite1 = new Sprite(90, 50);
	sprite2 = new Sprite(115, 75);

	sprite1.overlaps(sprite2);
}

function draw() {
	clear();
}
		</script>
		<div>
			<h2>Layer</h2>
			<p>By default sprites are drawn in the order they were created in. You can change the draw order by editing
				sprite's <code>.layer</code> property. Sprites with the highest layer value get drawn first.</p>
		</div>
		<script type="text/p5" name="layer" horiz lines=8 base=4>
sprite1.layer = 2;
sprite2.layer = 1;
		</script>
		<script type="text/md">
## overlaps, overlapping, and overlapped

On the first frame that a sprite overlaps with another sprite, the `overlaps` function returns true.

While a sprite is overlapping with another sprite, the `overlapping` function returns the number of frames the overlap has occurred for.

On the first frame after two sprites overlapped, the `overlapped` function returns true.
		</script>
		<script type="text/p5" name="collect coin">
let player, coin;

function setup() {
	new Canvas(500, 100);

	coin = new Sprite(400, 50, 30);
	coin.color = 'yellow';
	player = new Sprite(50, 50);
}

function draw() {
	clear();
	if (mouse.isOnCanvas) {
		player.moveTowards(mouse.x, mouse.y);
	}
		
	if (player.overlaps(coin)) coin.remove();
}
		</script>
		<div class="break"></div>
		<div>
			<h2>Try it out!</h2>
			<p>
				Try making the blue sprite change to red only while overlapping with the red sprite.
			</p>
		</div>
		<script type="text/p5" name="Level 1 Challenge" lines="20" horiz>
let sprite1, sprite2;

function setup() {
	new Canvas(100, 400);
	sprite1 = new Sprite(50, 50);
	sprite1.color = 'blue';
	sprite2 = new Sprite(50, 300);
	sprite2.color = 'red';
}

function draw() {
	clear();
	sprite1.moveTowards(mouse.x, mouse.y);

	
	
}
		</script>
	</div>
	<div id="page-7" class="page">
		<div>
			<h2>Chain Colliders</h2>
			<p>
				There are three different chain modes: vertex, distance, and line.
			</p>
			<p>
				To use vertex mode, provide the Sprite constructor with an array
				of vertex arrays. Each vertex array should contain [x, y]
				coordinates. In these
				mini-examples the sprite's (x, y) position is highlighted by a small black square.
			</p>
			<p>
				Try changing the vertexes of the chain sprite in the mini-example
				to make the ball stay on the floor!
			</p>
		</div>
		<script type="text/p5" name="vertex mode" lines="12">
let floor, ball;

function setup() {
	new Canvas(500, 200);
	world.gravity.y = 10;

	//                ([vertex0, vertex1, vertex2, ...])
	floor = new Sprite([[20, 60], [200, 140], [450, 180]]);
	floor.collider = 'static';

	ball = new Sprite(40, 0, 20);
}

function draw() {
	clear();
	rect(floor.x - 2, floor.y - 2, 4, 4);
}
		</script>
		<div>
			<p>
				To use distance mode, provide the Sprite constructor an (x, y) position and a list of distance arrays. These
				arrays should contain [x, y] distances relative to the previous vertex. The (x, y) position will be the first
				vertex in the chain.
			</p>
			<p>
				Distance mode is best for creating super long chains.
			</p>
			<p>
				Try adding 5 distances to make the ground roll up and down on a rocky ground chain.
			</p>
		</div>
		<script type="text/p5" name="distance mode" lines="12">
let ground, ball;

function setup() {
	new Canvas(500, 200);
	world.gravity.y = 10;

	//                 (x, y, [distance0, distance1, ...])
	ground = new Sprite(30, 90, [[20, 20], [60, -10], [50, 10]], 'static');

	ball = new Sprite(40, 0, 20);
}
	
function draw() {
	clear();
	rect(ground.x - 2, ground.y - 2, 4, 4);
}
		</script>

		<div>
			<p>
				To use line mode, provide the Sprite constructor an (x,y) position and a list of line lengths and angles. Each
				angle is relative to the previous line's angle.
			</p>
			<p>
				It's best to use line mode for small
				and/or
				symmetrical chains.
			</p>
			<p>
				Note that the line mode chain's (x, y) position is located at
				half the chain's width and half the chain's height, which may not be a point on the chain.
			</p>
			<p>
				Try changing the lengths of these lines and their angles!
			</p>
		</div>
		<script type="text/p5" name="line mode" lines="12">
let shelf, orb;

function setup() {
	new Canvas(500, 200);
	world.gravity.y = 10;

	//                (x, y, [length0, angle0, length1, ...])
	shelf = new Sprite(250, 100, [50, 20, 50, -20, 50, -20], 'static');

	orb = new Sprite(200, 0, 20);
}
	
function draw() {
	clear();
	rect(shelf.x - 2, shelf.y - 2, 4, 4);
}
		</script>
	</div>
	<div id="page-8" class="page">
		<div>
			<h2>Polygon Colliders</h2>
			<p>
				Regular polyons can be created by providing the Sprite constructor with a side length and the name of the
				polygon.
			</p>
			<p>
				Here are the names you can use: triangle, square, pentagon, hexagon, septagon, octagon, enneagon,
				decagon, hendecagon, and
				dodecagon.
			</p>
		</div>
		<script type="text/p5" name="pentagon" lines="6">
function setup() {
	new Canvas(500, 200);

	//        ( x,  y, sideLength, polygonName)
	new Sprite(250, 100, 80, 'pentagon');
}
	
function draw() {
	clear();
}
		</script>
		<div>
			<p>
				If the start and end of a chain is at the same point and the resulting shape is convex, it automatically becomes
				a polygon!
			</p>
		</div>
		<script type="text/p5" name="irregular polygon" lines="6">
function setup() {
	new Canvas(500, 200);

	new Sprite([[8, 8], [140, 192], [492, 90], [8, 8]]);
}

function draw() {
	clear();
}

		</script>
		<div>
			<p>
				You can force a convex polygon to be a chain by setting <code>sprite.shape = 'chain'</code>
			</p>
			<p>
				Regular polygons can be created from a list with the line length,
				angle, and repeat.
			</p>
			<p>
				The formula for the angle of
				a regular polygon is 360 / n, where n is the number of sides. Make
				that angle negative to orient the polygon with one of its edges on top.
			</p>
			<p>
				Try making a square shaped chain!
			</p>
		</div>
		<script type="text/p5" name="pentagon chain" lines="7">
function setup() {
	new Canvas(500, 200);

	//               (x, y, [length, angle, repeat])
	let s = new Sprite(250, 100, [80, -72, 5]);
	s.shape = 'chain';
}
	
function draw() {
	clear();
}
		</script>
		<div>
			<p>
				Here's the code for making a regular star with five points.
			</p>
			<p>
				Try changing the number of points!
			</p>
		</div>
		<script type="text/p5" name="star" lines="6">
function setup() {
	new Canvas(500, 200);

	//        ( x,  y, [l0, a0, l1, a1, repeat])
	new Sprite(250, 100, [60, -72, 60, 144, 5]);
}

function draw() {
	clear();
}
		</script>
		<div>
			<p>
				Now you can see how the p5.play logo was made!
			</p>
		</div>
		<script type="text/p5" name="p5.play logo" lines="5">
function setup() {
	new Canvas(500, 200);

	new Sprite(250, 100, [40, 72, 40, -72, 40, 72, 5]);
}

function draw() {
	clear();
}
		</script>
	</div>
	<div id="page-9" class="page">
		<div>
			<h2>Custom draw</h2>
			<p>
				Sometimes you won't be able to use pre-drawn animations to get
				the kind of visual effect you want for a sprite in motion.
			</p>
			<p>
				Fortunately, you can customize the sprite's <code>draw</code> function
				and make it display anything you want!
			</p>
			<p>
				Note that inside the sprite's draw function the center of the sprite
				is translated to position (0, 0).
			</p>
			<p>
				This mini example rotates the sprite's ellipse to the direction it's moving and makes the ellipse stretch in
				that direction
				proportional to it's speed. Kind of complicated!
			</p>
			<h2>Custom Update</h2>
			<p>
				You can also define a custom update function for a sprite that runs at the end of the draw loop or when
				updateSprites is called. You can put any sprite specific behavior you want in there.
			</p>
		</div>
		<script type="text/p5" name="custom draw">
let face, stretchy;

function setup() {
	new Canvas(500, 200);
	noStroke();

	face = loadImage('assets/face.png');
	stretchy = new Sprite(400, 200, 10, 10);
	
	stretchy.draw = () => {
		fill(237, 205, 0);

		push();
		rotate(stretchy.direction);
		ellipse(0, 0, 100 + stretchy.speed, 100 - stretchy.speed);
		pop();

		image(face, stretchy.vel.x * 2, stretchy.vel.y * 2);
	};

	stretchy.update = () => {
		stretchy.moveTowards(mouse.x, mouse.y, 0.07);
	};
}

function draw() {
	clear();
}
//
		</script>
	</div>

	<div class="break"></div>
	<nav id="pageNav"></nav>
	<div class="break"></div>
	<footer class="text-small">
		Created by Quinton Ashley (@quinton-ashley) Copyright 2022.
	</footer>

	<script src="../main.js"></script>
	<script src="learn.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<script src="md-tag-parser.js"></script>
	<script src="p5-mini.js"></script>
</body>

</html>
